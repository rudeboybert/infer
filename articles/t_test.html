<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Tidy t-Tests with infer • infer</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Tidy t-Tests with infer">
<meta name="description" content="Conducting t-Tests on tidy data with infer.">
<meta property="og:description" content="Conducting t-Tests on tidy data with infer.">
<meta property="og:image" content="https://infer.tidymodels.org/logo.png">
<script defer data-domain="infer.tidymodels.org,all.tidymodels.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">infer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.0.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/infer.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/t_test.html">Tidy t-Tests with infer</a></li>
    <li><a class="dropdown-item" href="../articles/anova.html">Tidy ANOVA (Analysis of Variance) with infer</a></li>
    <li><a class="dropdown-item" href="../articles/chi_squared.html">Tidy Chi-Squared Tests with infer</a></li>
    <li><a class="dropdown-item" href="../articles/paired.html">Tidy inference for paired data</a></li>
    <li><a class="dropdown-item" href="../articles/observed_stat_examples.html">Full infer Pipeline Examples</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidymodels/infer/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Tidy t-Tests with infer</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidymodels/infer/blob/main/vignettes/t_test.Rmd" class="external-link"><code>vignettes/t_test.Rmd</code></a></small>
      <div class="d-none name"><code>t_test.Rmd</code></div>
    </div>

    
    
<div class="section level3">
<h3 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h3>
<p>In this vignette, we’ll walk through conducting
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math>-tests
and their randomization-based analogue using infer. We’ll start out with
a 1-sample
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math>-test,
which compares a sample mean to a hypothesized true mean value. Then,
we’ll discuss 2-sample
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math>-tests,
testing the difference in means of two populations using a sample of
data drawn from them. If you’re interested in evaluating whether
differences in paired values (e.g. some measure taken of a person before
and after an experiment) differ from 0, see
<code><a href="../articles/paired.html">vignette("paired", package = "infer")</a></code>.</p>
<p>Throughout this vignette, we’ll make use of the <code>gss</code>
dataset supplied by infer, which contains a sample of data from the
General Social Survey. See <code><a href="../reference/gss.html">?gss</a></code> for more information on the
variables included and their source. Note that this data (and our
examples on it) are for demonstration purposes only, and will not
necessarily provide accurate estimates unless weighted properly. For
these examples, let’s suppose that this dataset is a representative
sample of a population we want to learn about: American adults. The data
looks like this:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">gss</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Rows: 500</span></span>
<span><span class="co">## Columns: 11</span></span>
<span><span class="co">## $ year    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 2014<span style="color: #949494;">, </span>1994<span style="color: #949494;">, </span>1998<span style="color: #949494;">, </span>1996<span style="color: #949494;">, </span>1994<span style="color: #949494;">, </span>1996<span style="color: #949494;">, </span>1990<span style="color: #949494;">, </span>2016<span style="color: #949494;">, </span>2000<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">## $ age     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 36<span style="color: #949494;">, </span>34<span style="color: #949494;">, </span>24<span style="color: #949494;">, </span>42<span style="color: #949494;">, </span>31<span style="color: #949494;">, </span>32<span style="color: #949494;">, </span>48<span style="color: #949494;">, </span>36<span style="color: #949494;">, </span>30<span style="color: #949494;">, </span>33<span style="color: #949494;">, </span>21<span style="color: #949494;">, </span>30<span style="color: #949494;">, </span>38<span style="color: #949494;">, </span>4…</span></span>
<span><span class="co">## $ sex     <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> male<span style="color: #949494;">, </span>female<span style="color: #949494;">, </span>male<span style="color: #949494;">, </span>male<span style="color: #949494;">, </span>male<span style="color: #949494;">, </span>female<span style="color: #949494;">, </span>female<span style="color: #949494;">, </span>femal…</span></span>
<span><span class="co">## $ college <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> degree<span style="color: #949494;">, </span>no degree<span style="color: #949494;">, </span>degree<span style="color: #949494;">, </span>no degree<span style="color: #949494;">, </span>degree<span style="color: #949494;">, </span>no degr…</span></span>
<span><span class="co">## $ partyid <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> ind<span style="color: #949494;">, </span>rep<span style="color: #949494;">, </span>ind<span style="color: #949494;">, </span>ind<span style="color: #949494;">, </span>rep<span style="color: #949494;">, </span>rep<span style="color: #949494;">, </span>dem<span style="color: #949494;">, </span>ind<span style="color: #949494;">, </span>rep<span style="color: #949494;">, </span>dem<span style="color: #949494;">, </span>dem…</span></span>
<span><span class="co">## $ hompop  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 3<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>2<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">## $ hours   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 50<span style="color: #949494;">, </span>31<span style="color: #949494;">, </span>40<span style="color: #949494;">, </span>40<span style="color: #949494;">, </span>40<span style="color: #949494;">, </span>53<span style="color: #949494;">, </span>32<span style="color: #949494;">, </span>20<span style="color: #949494;">, </span>40<span style="color: #949494;">, </span>40<span style="color: #949494;">, </span>23<span style="color: #949494;">, </span>52<span style="color: #949494;">, </span>38<span style="color: #949494;">, </span>7…</span></span>
<span><span class="co">## $ income  <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span> $25000 or more<span style="color: #949494;">, </span>$20000 - 24999<span style="color: #949494;">, </span>$25000 or more<span style="color: #949494;">, </span>$2500…</span></span>
<span><span class="co">## $ class   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> middle class<span style="color: #949494;">, </span>working class<span style="color: #949494;">, </span>working class<span style="color: #949494;">, </span>working c…</span></span>
<span><span class="co">## $ finrela <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> below average<span style="color: #949494;">, </span>below average<span style="color: #949494;">, </span>below average<span style="color: #949494;">, </span>above av…</span></span>
<span><span class="co">## $ weight  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.8960<span style="color: #949494;">, </span>1.0825<span style="color: #949494;">, </span>0.5501<span style="color: #949494;">, </span>1.0864<span style="color: #949494;">, </span>1.0825<span style="color: #949494;">, </span>1.0864<span style="color: #949494;">, </span>1.062…</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="sample-t-test">1-Sample t-Test<a class="anchor" aria-label="anchor" href="#sample-t-test"></a>
</h3>
<p>The 1-sample
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math>-test
can be used to test whether a sample of continuous data could have
plausibly come from a population with a specified mean.</p>
<p>As an example, we’ll test whether the average American adult works 40
hours a week using data from the <code>gss</code>. To do so, we make use
of the <code>hours</code> variable, giving the number of hours that
respondents reported having worked in the previous week. The
distribution of <code>hours</code> in the observed data looks like
this:</p>
<p><img src="t_test_files/figure-html/plot-1-sample-1.png" width="576"></p>
<p>It looks like most respondents reported having worked 40 hours, but
there’s quite a bit of variability. Let’s test whether we have evidence
that the true mean number of hours that Americans work per week is
40.</p>
<p>infer’s randomization-based analogue to the 1-sample
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math>-test
is a 1-sample mean test. We’ll start off showcasing that test before
demonstrating how to carry out a theory-based
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math>-test
with the package.</p>
<p>First, to calculate the observed statistic, we can use
<code><a href="../reference/specify.html">specify()</a></code> and <code><a href="../reference/calculate.html">calculate()</a></code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># calculate the observed statistic</span></span>
<span><span class="va">observed_statistic</span> <span class="op">&lt;-</span> <span class="va">gss</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/specify.html">specify</a></span><span class="op">(</span>response <span class="op">=</span> <span class="va">hours</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/calculate.html">calculate</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"mean"</span><span class="op">)</span></span></code></pre></div>
<p>The observed statistic is 41.382. Now, we want to compare this
statistic to a null distribution, generated under the assumption that
the mean was actually 40, to get a sense of how likely it would be for
us to see this observed mean if the true number of hours worked per week
in the population was really 40.</p>
<p>We can <code><a href="../reference/generate.html">generate()</a></code> the null distribution using the
bootstrap. In the bootstrap, for each replicate, a sample of size equal
to the input sample size is drawn (with replacement) from the input
sample data. This allows us to get a sense of how much variability we’d
expect to see in the entire population so that we can then understand
how unlikely our sample mean would be.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># generate the null distribution</span></span>
<span><span class="va">null_dist_1_sample</span> <span class="op">&lt;-</span> <span class="va">gss</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/specify.html">specify</a></span><span class="op">(</span>response <span class="op">=</span> <span class="va">hours</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/hypothesize.html">hypothesize</a></span><span class="op">(</span>null <span class="op">=</span> <span class="st">"point"</span>, mu <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/generate.html">generate</a></span><span class="op">(</span>reps <span class="op">=</span> <span class="fl">1000</span>, type <span class="op">=</span> <span class="st">"bootstrap"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/calculate.html">calculate</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"mean"</span><span class="op">)</span></span></code></pre></div>
<p>To get a sense for what these distributions look like, and where our
observed statistic falls, we can use <code><a href="../reference/visualize.html">visualize()</a></code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># visualize the null distribution and test statistic!</span></span>
<span><span class="va">null_dist_1_sample</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/visualize.html">visualize</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/shade_p_value.html">shade_p_value</a></span><span class="op">(</span><span class="va">observed_statistic</span>,</span>
<span>    direction <span class="op">=</span> <span class="st">"two-sided"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="t_test_files/figure-html/visualize-1-sample-1.png" width="576"></p>
<p>It looks like our observed mean of 41.382 would be relatively
unlikely if the true mean was actually 40 hours a week. More exactly, we
can calculate the p-value:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># calculate the p value from the test statistic and null distribution</span></span>
<span><span class="va">p_value_1_sample</span> <span class="op">&lt;-</span> <span class="va">null_dist_1_sample</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/get_p_value.html">get_p_value</a></span><span class="op">(</span>obs_stat <span class="op">=</span> <span class="va">observed_statistic</span>,</span>
<span>              direction <span class="op">=</span> <span class="st">"two-sided"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p_value_1_sample</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1 × 1</span></span></span>
<span><span class="co">##   p_value</span></span>
<span><span class="co">##     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>   0.022</span></span></code></pre>
<p>Thus, if the true mean number of hours worked per week was really 40,
our approximation of the probability that we would see a test statistic
as or more extreme than 41.382 is approximately 0.022.</p>
<p>Analogously to the steps shown above, the package supplies a wrapper
function, <code>t_test</code>, to carry out 1-sample
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math>-tests
on tidy data. Rather than using randomization, the wrappers carry out
the theory-based
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math>-test.
The syntax looks like this:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/t_test.html">t_test</a></span><span class="op">(</span><span class="va">gss</span>, response <span class="op">=</span> <span class="va">hours</span>, mu <span class="op">=</span> <span class="fl">40</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1 × 7</span></span></span>
<span><span class="co">##   statistic  t_df p_value alternative estimate lower_ci upper_ci</span></span>
<span><span class="co">##       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>      2.09   499  0.037<span style="text-decoration: underline;">6</span> two.sided       41.4     40.1     42.7</span></span></code></pre>
<p>An alternative approach to the <code><a href="../reference/t_test.html">t_test()</a></code> wrapper is to
calculate the observed statistic with an infer pipeline and then supply
it to the <code>pt</code> function from base R.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># calculate the observed statistic</span></span>
<span><span class="va">observed_statistic</span> <span class="op">&lt;-</span> <span class="va">gss</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/specify.html">specify</a></span><span class="op">(</span>response <span class="op">=</span> <span class="va">hours</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/hypothesize.html">hypothesize</a></span><span class="op">(</span>null <span class="op">=</span> <span class="st">"point"</span>, mu <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/calculate.html">calculate</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"t"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Note that this pipeline to calculate an observed statistic includes a
call to <code><a href="../reference/hypothesize.html">hypothesize()</a></code> since the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math>
statistic requires a hypothesized mean value.</p>
<p>Then, juxtaposing that
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math>
statistic with its associated distribution using the <code>pt</code>
function:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/TDist.html" class="external-link">pt</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unname.html" class="external-link">unname</a></span><span class="op">(</span><span class="va">observed_statistic</span><span class="op">)</span>, df <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">gss</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span>, lower.tail <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">*</span><span class="fl">2</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0.03756</span></span></code></pre>
<p>Note that the resulting
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math>-statistics
from these two theory-based approaches are the same.</p>
</div>
<div class="section level3">
<h3 id="sample-t-test-1">2-Sample t-Test<a class="anchor" aria-label="anchor" href="#sample-t-test-1"></a>
</h3>
<p>2-Sample
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math>-tests
evaluate the difference in mean values of two populations using data
randomly-sampled from the population that approximately follows a normal
distribution. As an example, we’ll test if Americans work the same
number of hours a week regardless of whether they have a college degree
or not using data from the <code>gss</code>. The <code>college</code>
and <code>hours</code> variables allow us to do so:</p>
<p><img src="t_test_files/figure-html/plot-2-sample-1.png" width="576"></p>
<p>It looks like both of these distributions are centered near 40 hours
a week, but the distribution for those with a degree is slightly right
skewed.</p>
<p>infer’s randomization-based analogue to the 2-sample
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math>-test
is a difference in means test. We’ll start off showcasing that test
before demonstrating how to carry out a theory-based
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math>-test
with the package.</p>
<p>As with the one-sample test, to calculate the observed difference in
means, we can use <code><a href="../reference/specify.html">specify()</a></code> and
<code><a href="../reference/calculate.html">calculate()</a></code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># calculate the observed statistic</span></span>
<span><span class="va">observed_statistic</span> <span class="op">&lt;-</span> <span class="va">gss</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/specify.html">specify</a></span><span class="op">(</span><span class="va">hours</span> <span class="op">~</span> <span class="va">college</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/calculate.html">calculate</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"diff in means"</span>, order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"degree"</span>, <span class="st">"no degree"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">observed_statistic</span></span></code></pre></div>
<pre><code><span><span class="co">## Response: hours (numeric)</span></span>
<span><span class="co">## Explanatory: college (factor)</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 1 × 1</span></span></span>
<span><span class="co">##    stat</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>  1.54</span></span></code></pre>
<p>Note that, in the line <code>specify(hours ~ college)</code>, we
could have swapped this out with the syntax
<code>specify(response = hours, explanatory = college)</code>!</p>
<p>The <code>order</code> argument in that <code>calculate</code> line
gives the order to subtract the mean values in: in our case, we’re
taking the mean number of hours worked by those with a degree minus the
mean number of hours worked by those without a degree; a positive
difference, then, would mean that people with degrees worked more than
those without a degree.</p>
<p>Now, we want to compare this difference in means to a null
distribution, generated under the assumption that the number of hours
worked a week has no relationship with whether or not one has a college
degree, to get a sense of how likely it would be for us to see this
observed difference in means if there were really no relationship
between these two variables.</p>
<p>We can <code><a href="../reference/generate.html">generate()</a></code> the null distribution using
permutation, where, for each replicate, each value of degree status will
be randomly reassigned (without replacement) to a new number of hours
worked per week in the sample in order to break any association between
the two.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># generate the null distribution with randomization</span></span>
<span><span class="va">null_dist_2_sample</span> <span class="op">&lt;-</span> <span class="va">gss</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/specify.html">specify</a></span><span class="op">(</span><span class="va">hours</span> <span class="op">~</span> <span class="va">college</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/hypothesize.html">hypothesize</a></span><span class="op">(</span>null <span class="op">=</span> <span class="st">"independence"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/generate.html">generate</a></span><span class="op">(</span>reps <span class="op">=</span> <span class="fl">1000</span>, type <span class="op">=</span> <span class="st">"permute"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/calculate.html">calculate</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"diff in means"</span>, order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"degree"</span>, <span class="st">"no degree"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Again, note that, in the lines <code>specify(hours ~ college)</code>
in the above chunk, we could have used the syntax
<code>specify(response = hours, explanatory = college)</code>
instead!</p>
<p>To get a sense for what these distributions look like, and where our
observed statistic falls, we can use <code><a href="../reference/visualize.html">visualize()</a></code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># visualize the randomization-based null distribution and test statistic!</span></span>
<span><span class="va">null_dist_2_sample</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/visualize.html">visualize</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="../reference/shade_p_value.html">shade_p_value</a></span><span class="op">(</span><span class="va">observed_statistic</span>,</span>
<span>                direction <span class="op">=</span> <span class="st">"two-sided"</span><span class="op">)</span></span></code></pre></div>
<p><img src="t_test_files/figure-html/visualize-2-sample-1.png" width="576"></p>
<p>It looks like our observed statistic of 1.5384 would be unlikely if
there was truly no relationship between degree status and number of
hours worked. More exactly, we’ll use the randomization-based null
distribution to calculate the p-value.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># calculate the p value from the randomization-based null </span></span>
<span><span class="co"># distribution and the observed statistic</span></span>
<span><span class="va">p_value_2_sample</span> <span class="op">&lt;-</span> <span class="va">null_dist_2_sample</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/get_p_value.html">get_p_value</a></span><span class="op">(</span>obs_stat <span class="op">=</span> <span class="va">observed_statistic</span>,</span>
<span>              direction <span class="op">=</span> <span class="st">"two-sided"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p_value_2_sample</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1 × 1</span></span></span>
<span><span class="co">##   p_value</span></span>
<span><span class="co">##     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>   0.258</span></span></code></pre>
<p>Thus, if there were really no relationship between the number of
hours worked a week and whether one has a college degree, the
probability that we would see a statistic as or more extreme than 1.5384
is approximately 0.258.</p>
<p>Note that, similarly to the steps shown above, the package supplies a
wrapper function, <code><a href="../reference/t_test.html">t_test()</a></code>, to carry out 2-sample
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math>-tests
on tidy data. The syntax looks like this:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/t_test.html">t_test</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">gss</span>, </span>
<span>       formula <span class="op">=</span> <span class="va">hours</span> <span class="op">~</span> <span class="va">college</span>, </span>
<span>       order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"degree"</span>, <span class="st">"no degree"</span><span class="op">)</span>,</span>
<span>       alternative <span class="op">=</span> <span class="st">"two-sided"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1 × 7</span></span></span>
<span><span class="co">##   statistic  t_df p_value alternative estimate lower_ci upper_ci</span></span>
<span><span class="co">##       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>      1.12  366.   0.264 two.sided       1.54    -<span style="color: #BB0000;">1.16</span>     4.24</span></span></code></pre>
<p>In the above example, we specified the relationship with the syntax
<code>formula = hours ~ college</code>; we could have also written
<code>response = hours, explanatory = college</code>.</p>
<p>An alternative approach to the <code><a href="../reference/t_test.html">t_test()</a></code> wrapper is to
calculate the observed statistic with an infer pipeline and then supply
it to the <code>pt</code> function from base R. We can calculate the
statistic as before, switching out the
<code>stat = "diff in means"</code> argument with
<code>stat = "t"</code>.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># calculate the observed statistic</span></span>
<span><span class="va">observed_statistic</span> <span class="op">&lt;-</span> <span class="va">gss</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/specify.html">specify</a></span><span class="op">(</span><span class="va">hours</span> <span class="op">~</span> <span class="va">college</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/hypothesize.html">hypothesize</a></span><span class="op">(</span>null <span class="op">=</span> <span class="st">"point"</span>, mu <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/calculate.html">calculate</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"t"</span>, order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"degree"</span>, <span class="st">"no degree"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">observed_statistic</span></span></code></pre></div>
<pre><code><span><span class="co">##     t </span></span>
<span><span class="co">## 1.119</span></span></code></pre>
<p>Note that this pipeline to calculate an observed statistic includes
<code><a href="../reference/hypothesize.html">hypothesize()</a></code> since the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math>
statistic requires a hypothesized mean value.</p>
<p>Then, juxtaposing that
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math>
statistic with its associated distribution using the <code><a href="https://rdrr.io/r/stats/TDist.html" class="external-link">pt()</a></code>
function:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/TDist.html" class="external-link">pt</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unname.html" class="external-link">unname</a></span><span class="op">(</span><span class="va">observed_statistic</span><span class="op">)</span>, df <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">gss</span><span class="op">)</span> <span class="op">-</span> <span class="fl">2</span>, lower.tail <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">*</span><span class="fl">2</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0.2635</span></span></code></pre>
<p>Note that the results from these two theory-based approaches are
nearly the same.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by Andrew Bray, Chester Ismay, Evgeni Chasnovski, Simon Couch, Ben Baumer, Mine Cetinkaya-Rundel.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer>
</body>
</html>
